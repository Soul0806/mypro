webpackJsonp([1],{D4oe:function(t,e){},EQzX:function(t,e){},IPwR:function(t,e){},"K/Cw":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",{attrs:{name:"nav"}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App",methods:{}},s,!1,function(t){n("D4oe")},null,null).exports,a=n("/ocq"),c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("nav",[n("div",{staticClass:"wrapper"},[n("ul",t._l(t.tabs,function(e){return n("li",{class:{active:t.tabActive(e)}},[n("router-link",{attrs:{to:e.link}},[t._v("\n          "+t._s(e.name.ch))])],1)}))])])])},staticRenderFns:[]};var u=n("VU/8")({name:"Top",data:function(){return{tabs:[{name:{en:"overview",ch:"總覽"},link:"/overview"}]}},computed:{},methods:{tabActive:function(t){return this.$route.name==t.link.match(/\w+/)[0]}},updated:function(){},mounted:function(){}},c,!1,function(t){n("K/Cw")},"data-v-9482a4c0",null).exports,o=n("ueVu"),l={data:function(){return{signupForm:{email:"",password:""}}},methods:{signUp:function(){var t=this;o.auth.createUserWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(function(e){t.$router.push("/")},function(t){alert(t.message)})},signIn:function(){var t=this;o.auth.signInWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(function(e){t.$router.replace("/")},function(t){alert(t.message)})}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signUp"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.signupForm.email,expression:"signupForm.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:t.signupForm.email},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"email",e.target.value)}}})]),t._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.signupForm.password,expression:"signupForm.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.signupForm.password},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"password",e.target.value)}}})]),t._v(" "),n("button",{on:{click:t.signUp}},[t._v("Sign up")]),t._v(" "),n("button",{on:{click:t.signIn}},[t._v("Sign in")])])},staticRenderFns:[]};var p=n("VU/8")(l,h,!1,function(t){n("EQzX")},null,null).exports,d=n("gRE1"),v=n.n(d),m=n("bOdI"),f=n.n(m),g={name:"Overview",components:{operateButton:{template:'<li v-if="act">\n    <button @click.stop="test(\'plus\')" id="plus">+</button>\n    <button v-if="itshow" @click.stop="test(\'take\')" id="take">-</button>\n  </li>',props:["act","itshow"],data:function(){return{}},methods:{test:function(t){this.$emit("change",t)}}}},data:function(){return{operateInch:"",operateSpec:"",operateNum:0,operateActive:!1,tireSum:0}},computed:{},methods:{changenum:function(t){var e=this.operateInch,n=this.operateSpec,i=e+"/"+n;"plus"==t?(this.db_tires(i).set({num:++this.tires[e][n].num}),this.tireSum++):(this.db_tires(i).set({num:--this.tires[e][n].num}),this.tireSum--),this.operateNum=this.tires[e][n].num},opActive:function(t){return this.operateInch==t},test:function(){var t=this,e=event.target,n=new FileReader;n.onload=function(){console.log(t);var e=n.result.split("\n").map(function(t){return t.split(",")}),i={};t.ref.set({mytires:i}),e.map(function(t){t.map(function(t){if(t){var e=t.replace(/\//,"-").trim(),n=e.trim().slice(-2);i.hasOwnProperty(n)?i[n].hasOwnProperty(e)||(i[n][e]={num:0}):i[n]=f()({},e,{num:0})}})}),t.ref.set({mytires:i})},n.readAsText(e.files[0])},operate:function(t,e,n){1==this.operateActive&&this.reset(),this.operateInch=t,this.operateSpec=e,this.operateNum=n,this.operateActive=!0},check:function(t,e){var n=this.operateInch==t&&this.operateSpec==e;return!(""!=this.operateInch&&this.operateInch==t&&!n)},reset:function(){this.operateInch=this.operateSpec="",1==this.operateActive&&(document.getElementById("plus").remove(),this.operateNum>0&&document.getElementById("take").remove()),this.operateActive=!1},clickEvent:function(t,e){t.addEventListener("click",e)}},mounted:function(){var t=this;this.inches=_.range(12,21),this.db_tires().once("value",function(e){t.tires=e.val();var n=[];v()(t.tires).forEach(function(t){n=n.concat(v()(t).map(function(t){return t.num}))}),t.tireSum=n.reduce(function(t,e){return t+e})})}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"overview"}},[n("div",{attrs:{id:"ov-inch"}},[n("ul",t._l(t.inches,function(e){return n("li",[n("a",{attrs:{href:"#"+e}},[t._v(t._s(e))])])}))]),t._v(" "),n("div",{staticClass:"wrapper ov",attrs:{id:"ov-tire"},on:{click:t.reset}},[n("div",[t._v("Total: "+t._s(t.tireSum))]),t._v(" "),n("ul",{staticClass:"ov-tire-st"},t._l(t.inches,function(e){return n("li",{staticClass:"ov-tire-st-li"},[n("div",{staticClass:"ov-tire-st-inch",attrs:{id:e}},[n("h3",[t._v(t._s(e))])]),t._v(" "),[n("ul",{staticClass:"ov-tire-nd"},[t._l(t.tires[e],function(i,s){return t.check(e,s)?n("li",{staticClass:"ov-tire-nd-li",on:{click:function(n){n.stopPropagation(),t.operate(e,s,i.num)}}},[n("span",{staticClass:"ov-tire-nd-spec"},[t._v(t._s(s.replace(/-/,"/")))]),t._v(" "),n("span",{staticClass:"ov-tire-nd-num",class:{zero:0==i.num}},[t._v("\n                "+t._s(i.num)+"\n              ")])]):t._e()}),t._v(" "),n("operate-button",{staticClass:"li-operate",attrs:{itshow:t.operateNum>0,act:t.opActive(e)},on:{change:t.changenum}})],2)]],2)}))])])},staticRenderFns:[]};var b=n("VU/8")(g,A,!1,function(t){n("QG3J")},null,null).exports,w={data:function(){return{tireWidthRange:{range:[],current:""},tireHeightRange:{range:[],current:""}}},methods:{check:function(){var t=this,e=this.specs.inch,n=this.specs.width,i=this.specs.height,s=this.data.tempInch,r=n;""!=i&&(r+="-"+i);var a="tire/"+e,c="tire/"+e+"/"+(r+="-"+e);""==e||""==n&&""==i?alert("invalid input"):(s.push(e),this.ref.child(a).once("value",function(e){e.exists()?t.ref.child(c).once("value",function(e){e.exists()?alert("exists"):(t.ref.child(c).set({num:1}),t.data.tires.push(r),t.specs.height="")}):(t.ref.child(c).set({num:1}),t.ref.child("tire/inches").set([s]),t.data.tires.push(r),t.specs.height="")}))},clean:function(){this.specs.inch="",this.specs.width="",this.specs.height=""}},computed:{},mounted:function(){for(var t=155;t<=325;t+=10)this.tireWidthRange.range.push(t);for(var e=30;e<=75;e+=5)this.tireHeightRange.range.push(e)}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},[n("div",{staticClass:"tireWidth"},[t._v("\n    胎寬\n    "),n("input",{attrs:{id:"toggle",type:"checkbox"}}),t._v(" "),n("label",{attrs:{for:"toggle"}}),t._v(" "),n("ul",t._l(t.tireWidthRange.range,function(e){return n("li",{attrs:{tabindex:"-1"},on:{click:function(n){t.specs.width=e}}},[t._v("\n          "+t._s(e)+"\n      ")])}))]),t._v(" "),n("div",{staticClass:"tireHeight"},[t._v("\n    胎高\n    "),n("input",{attrs:{id:"togglee",type:"checkbox"}}),t._v(" "),n("label",{attrs:{for:"togglee"}}),t._v(" "),n("ul",t._l(t.tireHeightRange.range,function(e){return n("li",{staticClass:"tireHeightLi",attrs:{tabindex:"-1"},on:{click:function(n){t.specs.height=e}}},[t._v("\n        "+t._s(e)+"\n      ")])}))]),t._v(" "),n("div",{staticClass:"inputSec"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.specs.width,expression:"specs.width"}],attrs:{type:"text"},domProps:{value:t.specs.width},on:{input:function(e){e.target.composing||t.$set(t.specs,"width",e.target.value)}}}),t._v(" "),t.specs.height?n("span",[n("span",[t._v(" / ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.specs.height,expression:"specs.height"}],attrs:{type:"text"},domProps:{value:t.specs.height},on:{input:function(e){e.target.composing||t.$set(t.specs,"height",e.target.value)}}})]):t._e(),t._v(" "),n("span",[t._v(" - ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.specs.inch,expression:"specs.inch"}],attrs:{type:"text"},domProps:{value:t.specs.inch},on:{input:function(e){e.target.composing||t.$set(t.specs,"inch",e.target.value)}}}),t._v(" "),n("button",{on:{click:function(e){t.check()}}},[t._v("確認")]),t._v(" "),n("button",{on:{click:function(e){t.clean()}}},[t._v("clean")])])])},staticRenderFns:[]};var E=n("VU/8")(w,k,!1,function(t){n("IPwR")},null,null).exports,y=n("fZjL"),x=n.n(y),C={name:"Guide",data:function(){return{currrentInch:"",num:"",date:"",purchases:"",lastClick:0,today:new Date,contents:[]}},watch:{$route:function(t,e){var n=this;this.db_tires(t.params.inch).once("value",function(t){n.tires=t.val()})}},updated:function(){},computed:{},methods:{test:function(t){this.$router.push({path:"/guide/"+t})},nc_reset:function(){this.closed()},ni_active:function(t){this.currrentInch=t},inchActive:function(t){return this.currrentInch==t},inchUpdateView:function(t){var e=this;if(this.currrentInch!=t){this.db_tires(t).once("value",function(n){e.tires=n.val();var i=e.ctElem("ul",{cls:"navViewUl"}),s=function(n){e.db_tires(t+"/"+n).once("value",function(t){e.num=t.val().num;var s=e.ctElem("li"),r=e.ctElem("span",{id:n}),a=e.ctElem("span",{id:"specNum"}),c=e.ctElem("div",{id:"navViewUl-div"});r.appendChild(document.createTextNode(n)),a.appendChild(document.createTextNode(e.num)),c.appendChild(r),c.appendChild(a),s.appendChild(c),i.appendChild(s),r.addEventListener("click",function(t){var i=document.getElementById("navViewUl-button");null!=i&&i.remove();var s=e.ctElem("span",{id:"navViewUl-button"});s.innerHTML='\n            <button id="decrease" type="button" \n            class="btn btn-danger btn-number">\n              <span class="glyphicon">售</span>\n            </button>\n            <button id="increase" type="button" \n            class="btn btn-success btn-number">\n                <span class="glyphicon">進</span>\n            </button>\n            ',t.target.parentNode.appendChild(s),e.num=t.target.nextElementSibling.innerHTML;var r=t.target.nextElementSibling,a=document.getElementById("decrease"),c=document.getElementById("increase");a.addEventListener("click",function(t){e.nv_ctlNums("decrease",r,n)}),c.addEventListener("click",function(t){e.nv_ctlNums("increase",r,n),e.nv_purchase(n)})})})};for(var r in e.tires)s(r);navView.innerHTML="",navView.appendChild(i)}),this.ni_active(t)}},nv_ctlNums:function(t,e,n){"increase"==t?this.num++:this.num--,this.ref.child("tire/"+this.currrentInch+"/"+n).set({num:this.num}),e.innerHTML=this.num},nv_purchase:function(t){var e=this.today.toLocaleString().slice(2,10).replace(/\//gi,"-"),n={time:this.today.toLocaleString().slice(10).replace(/\s/g,""),q:1},i={};return i["purchase/"+e+"/"+t+"/"+this.ref.child("purchase/"+e+"/"+t).push().key]=n,this.ref.update(i)},np_del:function(t,e,n){var i=this,s=document.getElementById(e).nextElementSibling;if(s){var r=s.innerHTML;s.innerHTML=r-n}var a=e.slice(-2);this.ref.child("tire/"+a+"/"+e).once("value",function(t){var e=t.val();i.num=e.num});var c={};return c["purchase/"+t+"/"+e]=null,c["tire/"+a+"/"+e]={num:this.num-n},this.ref.update(c)},closed:function(){console.log("closed")},hovered:function(){}},mounted:function(){var t=this;this.inches=_.range(12,21),this.db_purchases().on("value",function(e){for(var n in t.purchases=e.val(),t.purchases)if(t.purchases.hasOwnProperty(n))for(var i in t.purchases[n]){var s=t.purchases[n][i];t.purchases[n][i]=x()(s).length}})}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"guide"}},[i("div",{staticClass:"wrapper gu"},[i("ul",{attrs:{id:"gu-inch"}},t._l(t.inches,function(e){return i("li",[i("router-link",{attrs:{to:"/guide/"+e}},[t._v("\n        "+t._s(e)+"  \n      ")])],1)})),t._v(" "),i("ul",{attrs:{id:"gu-view"}},t._l(t.tires,function(e,n){return i("li",[i("span",{staticClass:"spec"},[t._v(t._s(n))]),t._v(" "),i("span",{staticClass:"num"},[t._v(t._s(e.num))])])})),t._v(" "),i("div",{staticClass:"nv",attrs:{id:"navView"}}),t._v(" "),i("div",{staticClass:"np navPurchase"},t._l(t.purchases,function(e,s){return i("div",[i("h2",[t._v(t._s(s))]),t._v(" "),i("ul",t._l(e,function(e,r){return i("li",[i("div",[i("span",[t._v(t._s(r)+", "+t._s(e))]),t._v(" "),i("span",{on:{click:function(n){t.np_del(s,t.ky_d,e)}}},[i("img",{attrs:{src:n("SFLA")}})])])])}))])}))])])},staticRenderFns:[]};var N=n("VU/8")(C,I,!1,function(t){n("uZ1x")},null,null).exports,F=n("kxiW"),S=n.n(F);n("Ya8g");i.a.use(a.a);var U=new a.a({mode:"history",routes:[{path:"*",redirect:"/login"},{path:"/",name:"overview",components:{default:b,nav:u},meta:{requiresAuth:!0}},{path:"/guide/:inch",name:"guide",components:{default:N,nav:u},meta:{requiresAuth:!0}},{path:"/insert",name:"insert",components:{default:E,nav:u},meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:p}]});U.beforeEach(function(t,e,n){var i=S.a.auth().currentUser,s=t.matched.some(function(t){return t.meta.requiresAuth});s&&!i?n("login"):!s&&i?n("/"):n()});var V=U,L=(n("M4fF"),n("NYxO"));n("ueVu");i.a.use(L.a);var B=new L.a.Store({state:{currentUser:null,userProfile:{}},actions:{},mutations:{setCurrentUser:function(t,e){t.currentUser=e},setUserProfile:function(t,e){t.userProfile=e}}}),P=n("ueVu"),M={data:function(){return{db:P.db,auth:P.auth,ref:P.ref,tires:[],db_tires:P.db_tires,db_purchases:P.db_purchases,inches:"",data:{tempInch:[],tires:[]},specs:{width:"",height:"",inch:""}}},methods:{ctElem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.createElement(t.elem);if(!this.isEmpty(t))for(var n in t)switch(n){case"cls":e.className=t.cls;break;case"id":e.id=t.id;break;case"text":e.innerHTML=t.text}return e},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},mounted:function(){Element.prototype.remove=function(){this.parentElement.removeChild(this)}}};n("a0pE"),n("erTq");console.log(V),i.a.mixin(M);var H=void 0;n("ueVu").auth.onAuthStateChanged(function(t){H||(H=new i.a({el:"#app",router:V,store:B,components:{App:r},template:"<App/>"}))})},QG3J:function(t,e){},SFLA:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMQSURBVFhH7VbLThRBFJ2lox+gxrc/IGMiLjQhBJiu6h4YElwp+gP8AH8giTsY0L2Kz62Z+AM+FhLEDzC4UhM0ETIsSLo85/btwDhdPd04S05yMtVV9123bqZyhDKIjTkTR9HtOAwXwTexte+EXHOPZ5BR8cEBhq+BT+Hkj2s2nXBqyrnJyYRc6z5ktsFVcFjVDw9Xq1VhaMk1GomDMHTO2nxShrLQQdCteGLiuJorBxcEF2Dgk5ueLub4X1IHurCxhiAuqtliQNbnofhVMskyXoa8lijaZEJqPh/xzMwxBPB5IM5TMghrN3AtVXXjRxwELSl7lqH/Ia/DmBV1kw3c2xVpON+dR1HSYPwtc0bSJhszCGrqrhfOmBfe0lPZ2u/gPDL5Jc8vPcOaezA+TxlJ4qBuSl6FMa/UXTcgcBLKHV92aKQfUB6iLBzdjBuNjjhiYFHUQfA39KyG75+ZdlAF+NiNx8dPU7YLMH4nN3tjNlRUgKdl0kEU1+uBbgvghA2XbYtVsPauiu4Dmy1vACSmHYJ4ouICfN8j9VMAO49lMmbZIJNr6G1GKLZzFck+nYznu9L3BSWJvFWVfWDzfVdj+ZgEsehUj+Aae0uFni+vzNqPieYBFAogHa/GLGQEsCAB+J5wSm8Axa/ggar0gGd9q+C9gn5NmET+SMUF6P457M3pp4AyuZX0NmG/Z2jtuooKID8jFSONuaXbAsqWf4ZBcAoHu5l3yAHSaGxxAKlsHcNmT4ZNMqT28AJkFmDNIbXlteMbRAQOX+ZVAb+/wfvIfqcrQ1aIezgTmbzsjXmt7nqBwyFR9nUyM2aAnuzkLGsEp+e0Xa9fVXfZQBWWC73nskxe0EN14weirCKIDe9VHIYsfRh+oW11kw/9P7g5kCDoPIq+lf5f6MbGLkFxrdB0yyJ1WPYoWo9HRy+r2XLgX2oYaEnzsBpFAkmbkS8jDJfdyMgJNXd4wNAwAnkGbotxkgOIE4/kWvchuwO552i466o+OMTN5lk4mIWDJTRqG/ygbLNSGECzyPycih+hACqVv28XxGdUFXCgAAAAAElFTkSuQmCC"},a0pE:function(t,e){},erTq:function(t,e){},uZ1x:function(t,e){},ueVu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"db",function(){return r}),n.d(e,"auth",function(){return a}),n.d(e,"currentUser",function(){return c}),n.d(e,"ref",function(){return u}),n.d(e,"db_tires",function(){return o}),n.d(e,"db_purchases",function(){return l});var i=n("kxiW"),s=n.n(i);n("881v");s.a.initializeApp({apiKey:"AIzaSyA0hCFocCA9j-_hugnX3tNU82kvpKSb7Bs",authDomain:"myproject-68a05.firebaseapp.com",databaseURL:"https://myproject-68a05.firebaseio.com",projectId:"myproject-68a05",storageBucket:"myproject-68a05.appspot.com",messagingSenderId:"261190786683"});var r=s.a.database(),a=s.a.auth(),c=a.currentUser,u=r.ref("/"),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=""==t?"mytires/":"mytires/"+t;return r.ref(e)},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=""==t?"purchase/":"purchase/"+t;return r.ref(e)}}},["NHnr"]);
//# sourceMappingURL=app.c0eddc1a5f27a7f6f756.js.map