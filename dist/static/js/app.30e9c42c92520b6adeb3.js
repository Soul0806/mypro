webpackJsonp([1],{D4oe:function(e,t){},EQzX:function(e,t){},IPwR:function(e,t){},"K/Cw":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view",{attrs:{name:"nav"}}),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App",methods:{}},r,!1,function(e){n("D4oe")},null,null).exports,a=n("/ocq"),c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("nav",[n("div",{staticClass:"wrapper"},[n("ul",e._l(e.tabs,function(t){return n("li",{class:{active:e.tabActive(t)}},[n("router-link",{attrs:{to:t.link}},[e._v("\n          "+e._s(t.name.ch))])],1)}))])])])},staticRenderFns:[]};var u=n("VU/8")({name:"Top",data:function(){return{tabs:[{name:{en:"overview",ch:"總覽"},link:"/overview"}]}},computed:{},methods:{tabActive:function(e){return this.$route.name==e.link.match(/\w+/)[0]}},updated:function(){},mounted:function(){}},c,!1,function(e){n("K/Cw")},"data-v-9482a4c0",null).exports,o=n("ueVu"),l={data:function(){return{signupForm:{email:"",password:""}}},methods:{signUp:function(){var e=this;o.auth.createUserWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(function(t){e.$router.push("/")},function(e){alert(e.message)})},signIn:function(){var e=this;o.auth.signInWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(function(t){e.$router.replace("/")},function(e){alert(e.message)})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"signUp"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.signupForm.email,expression:"signupForm.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:e.signupForm.email},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"email",t.target.value)}}})]),e._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.signupForm.password,expression:"signupForm.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.signupForm.password},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"password",t.target.value)}}})]),e._v(" "),n("button",{on:{click:e.signUp}},[e._v("Sign up")]),e._v(" "),n("button",{on:{click:e.signIn}},[e._v("Sign in")])])},staticRenderFns:[]};var p=n("VU/8")(l,h,!1,function(e){n("EQzX")},null,null).exports,d=n("gRE1"),v=n.n(d),m=n("bOdI"),f=n.n(m),g={name:"Overview",data:function(){return{operateInch:"",operateSpec:"",opreateActive:!1,tireSum:0}},computed:{},methods:{test:function(){var e=this,t=event.target,n=new FileReader;n.onload=function(){console.log(e);var t=n.result.split("\n").map(function(e){return e.split(",")}),i={};e.ref.set({mytires:i}),t.map(function(e){e.map(function(e){if(e){var t=e.replace(/\//,"-").trim(),n=t.trim().slice(-2);i.hasOwnProperty(n)?i[n].hasOwnProperty(t)||(i[n][t]={num:0}):i[n]=f()({},t,{num:0})}})}),e.ref.set({mytires:i})},n.readAsText(t.files[0])},operate:function(e,t){var n=this;1==this.opreateActive&&this.reset(),this.operateInch=e,this.operateSpec=t;var i=this.ctElem({elem:"button",text:"+",id:"plus"}),r=this.ctElem({elem:"button",text:"-",id:"take"});event.currentTarget.parentNode.append(i,r);var s=e+"/"+t;this.clickEvent(i,function(){n.db_tires(s).set({num:++n.tires[e][t].num}),n.tireSum++,event.stopPropagation()}),this.clickEvent(r,function(){n.db_tires(s).set({num:--n.tires[e][t].num}),n.tireSum--,event.stopPropagation()}),this.opreateActive=!0},check:function(e,t){var n=this.operateInch==e&&this.operateSpec==t;return!(""!=this.operateInch&&this.operateInch==e&&!n)},reset:function(){this.operateInch=this.operateSpec="",1==this.opreateActive&&(document.getElementById("plus").remove(),document.getElementById("take").remove()),this.opreateActive=!1},clickEvent:function(e,t){e.addEventListener("click",t)}},mounted:function(){var e=this;this.inches=_.range(12,21),this.db_tires().once("value",function(t){e.tires=t.val();var n=[];v()(e.tires).forEach(function(e){n=n.concat(v()(e).map(function(e){return e.num}))}),e.tireSum=n.reduce(function(e,t){return e+t})})}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"overview"}},[n("div",{attrs:{id:"ov-inch"}},[n("ul",e._l(e.inches,function(t){return n("li",[n("a",{attrs:{href:"#"+t}},[e._v(e._s(t))])])}))]),e._v(" "),n("div",{staticClass:"wrapper ov",attrs:{id:"ov-tire"},on:{click:e.reset}},[n("div",[e._v("Total: "+e._s(e.tireSum))]),e._v(" "),n("ul",{staticClass:"ov-tire-st"},e._l(e.inches,function(t){return n("li",{staticClass:"ov-tire-st-li"},[n("div",{staticClass:"ov-tire-st-inch",attrs:{id:t}},[n("h3",[e._v(e._s(t))])]),e._v(" "),[n("ul",{staticClass:"ov-tire-nd"},e._l(e.tires[t],function(i,r){return e.check(t,r)?n("li",{staticClass:"ov-tire-nd-li",on:{click:function(n){n.stopPropagation(),e.operate(t,r)}}},[n("span",{staticClass:"ov-tire-nd-spec"},[e._v(e._s(r.replace(/-/,"/")))]),e._v(" "),n("span",{staticClass:"ov-tire-nd-num",class:{zero:0==i.num}},[e._v("\n                "+e._s(i.num)+"\n              ")])]):e._e()}))]],2)}))])])},staticRenderFns:[]};var b=n("VU/8")(g,A,!1,function(e){n("bTkw")},null,null).exports,w={data:function(){return{tireWidthRange:{range:[],current:""},tireHeightRange:{range:[],current:""}}},methods:{check:function(){var e=this,t=this.specs.inch,n=this.specs.width,i=this.specs.height,r=this.data.tempInch,s=n;""!=i&&(s+="-"+i);var a="tire/"+t,c="tire/"+t+"/"+(s+="-"+t);""==t||""==n&&""==i?alert("invalid input"):(r.push(t),this.ref.child(a).once("value",function(t){t.exists()?e.ref.child(c).once("value",function(t){t.exists()?alert("exists"):(e.ref.child(c).set({num:1}),e.data.tires.push(s),e.specs.height="")}):(e.ref.child(c).set({num:1}),e.ref.child("tire/inches").set([r]),e.data.tires.push(s),e.specs.height="")}))},clean:function(){this.specs.inch="",this.specs.width="",this.specs.height=""}},computed:{},mounted:function(){for(var e=155;e<=325;e+=10)this.tireWidthRange.range.push(e);for(var t=30;t<=75;t+=5)this.tireHeightRange.range.push(t)}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu"},[n("div",{staticClass:"tireWidth"},[e._v("\n    胎寬\n    "),n("input",{attrs:{id:"toggle",type:"checkbox"}}),e._v(" "),n("label",{attrs:{for:"toggle"}}),e._v(" "),n("ul",e._l(e.tireWidthRange.range,function(t){return n("li",{attrs:{tabindex:"-1"},on:{click:function(n){e.specs.width=t}}},[e._v("\n          "+e._s(t)+"\n      ")])}))]),e._v(" "),n("div",{staticClass:"tireHeight"},[e._v("\n    胎高\n    "),n("input",{attrs:{id:"togglee",type:"checkbox"}}),e._v(" "),n("label",{attrs:{for:"togglee"}}),e._v(" "),n("ul",e._l(e.tireHeightRange.range,function(t){return n("li",{staticClass:"tireHeightLi",attrs:{tabindex:"-1"},on:{click:function(n){e.specs.height=t}}},[e._v("\n        "+e._s(t)+"\n      ")])}))]),e._v(" "),n("div",{staticClass:"inputSec"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.specs.width,expression:"specs.width"}],attrs:{type:"text"},domProps:{value:e.specs.width},on:{input:function(t){t.target.composing||e.$set(e.specs,"width",t.target.value)}}}),e._v(" "),e.specs.height?n("span",[n("span",[e._v(" / ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.specs.height,expression:"specs.height"}],attrs:{type:"text"},domProps:{value:e.specs.height},on:{input:function(t){t.target.composing||e.$set(e.specs,"height",t.target.value)}}})]):e._e(),e._v(" "),n("span",[e._v(" - ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.specs.inch,expression:"specs.inch"}],attrs:{type:"text"},domProps:{value:e.specs.inch},on:{input:function(t){t.target.composing||e.$set(e.specs,"inch",t.target.value)}}}),e._v(" "),n("button",{on:{click:function(t){e.check()}}},[e._v("確認")]),e._v(" "),n("button",{on:{click:function(t){e.clean()}}},[e._v("clean")])])])},staticRenderFns:[]};var k=n("VU/8")(w,E,!1,function(e){n("IPwR")},null,null).exports,y=n("fZjL"),x=n.n(y),C={name:"Guide",data:function(){return{currrentInch:"",num:"",date:"",purchases:"",lastClick:0,today:new Date,contents:[]}},watch:{$route:function(e,t){var n=this;this.db_tires(e.params.inch).once("value",function(e){n.tires=e.val()})}},updated:function(){},computed:{},methods:{test:function(e){this.$router.push({path:"/guide/"+e})},nc_reset:function(){this.closed()},ni_active:function(e){this.currrentInch=e},inchActive:function(e){return this.currrentInch==e},inchUpdateView:function(e){var t=this;if(this.currrentInch!=e){this.db_tires(e).once("value",function(n){t.tires=n.val();var i=t.ctElem("ul",{cls:"navViewUl"}),r=function(n){t.db_tires(e+"/"+n).once("value",function(e){t.num=e.val().num;var r=t.ctElem("li"),s=t.ctElem("span",{id:n}),a=t.ctElem("span",{id:"specNum"}),c=t.ctElem("div",{id:"navViewUl-div"});s.appendChild(document.createTextNode(n)),a.appendChild(document.createTextNode(t.num)),c.appendChild(s),c.appendChild(a),r.appendChild(c),i.appendChild(r),s.addEventListener("click",function(e){var i=document.getElementById("navViewUl-button");null!=i&&i.remove();var r=t.ctElem("span",{id:"navViewUl-button"});r.innerHTML='\n            <button id="decrease" type="button" \n            class="btn btn-danger btn-number">\n              <span class="glyphicon">售</span>\n            </button>\n            <button id="increase" type="button" \n            class="btn btn-success btn-number">\n                <span class="glyphicon">進</span>\n            </button>\n            ',e.target.parentNode.appendChild(r),t.num=e.target.nextElementSibling.innerHTML;var s=e.target.nextElementSibling,a=document.getElementById("decrease"),c=document.getElementById("increase");a.addEventListener("click",function(e){t.nv_ctlNums("decrease",s,n)}),c.addEventListener("click",function(e){t.nv_ctlNums("increase",s,n),t.nv_purchase(n)})})})};for(var s in t.tires)r(s);navView.innerHTML="",navView.appendChild(i)}),this.ni_active(e)}},nv_ctlNums:function(e,t,n){"increase"==e?this.num++:this.num--,this.ref.child("tire/"+this.currrentInch+"/"+n).set({num:this.num}),t.innerHTML=this.num},nv_purchase:function(e){var t=this.today.toLocaleString().slice(2,10).replace(/\//gi,"-"),n={time:this.today.toLocaleString().slice(10).replace(/\s/g,""),q:1},i={};return i["purchase/"+t+"/"+e+"/"+this.ref.child("purchase/"+t+"/"+e).push().key]=n,this.ref.update(i)},np_del:function(e,t,n){var i=this,r=document.getElementById(t).nextElementSibling;if(r){var s=r.innerHTML;r.innerHTML=s-n}var a=t.slice(-2);this.ref.child("tire/"+a+"/"+t).once("value",function(e){var t=e.val();i.num=t.num});var c={};return c["purchase/"+e+"/"+t]=null,c["tire/"+a+"/"+t]={num:this.num-n},this.ref.update(c)},closed:function(){console.log("closed")},hovered:function(){}},mounted:function(){var e=this;this.inches=_.range(12,21),this.db_purchases().on("value",function(t){for(var n in e.purchases=t.val(),e.purchases)if(e.purchases.hasOwnProperty(n))for(var i in e.purchases[n]){var r=e.purchases[n][i];e.purchases[n][i]=x()(r).length}})}},I={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"guide"}},[i("div",{staticClass:"wrapper gu"},[i("ul",{attrs:{id:"gu-inch"}},e._l(e.inches,function(t){return i("li",[i("router-link",{attrs:{to:"/guide/"+t}},[e._v("\n        "+e._s(t)+"  \n      ")])],1)})),e._v(" "),i("ul",{attrs:{id:"gu-view"}},e._l(e.tires,function(t,n){return i("li",[i("span",{staticClass:"spec"},[e._v(e._s(n))]),e._v(" "),i("span",{staticClass:"num"},[e._v(e._s(t.num))])])})),e._v(" "),i("div",{staticClass:"nv",attrs:{id:"navView"}}),e._v(" "),i("div",{staticClass:"np navPurchase"},e._l(e.purchases,function(t,r){return i("div",[i("h2",[e._v(e._s(r))]),e._v(" "),i("ul",e._l(t,function(t,s){return i("li",[i("div",[i("span",[e._v(e._s(s)+", "+e._s(t))]),e._v(" "),i("span",{on:{click:function(n){e.np_del(r,e.ky_d,t)}}},[i("img",{attrs:{src:n("SFLA")}})])])])}))])}))])])},staticRenderFns:[]};var F=n("VU/8")(C,I,!1,function(e){n("uZ1x")},null,null).exports,S=n("kxiW"),N=n.n(S);n("Ya8g");i.a.use(a.a);var U=new a.a({mode:"history",routes:[{path:"*",redirect:"/login"},{path:"/",name:"overview",components:{default:b,nav:u},meta:{requiresAuth:!0}},{path:"/guide/:inch",name:"guide",components:{default:F,nav:u},meta:{requiresAuth:!0}},{path:"/insert",name:"insert",components:{default:k,nav:u},meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:p}]});U.beforeEach(function(e,t,n){var i=N.a.auth().currentUser,r=e.matched.some(function(e){return e.meta.requiresAuth});r&&!i?n("login"):!r&&i?n("/"):n()});var V=U,L=(n("M4fF"),n("NYxO"));n("ueVu");i.a.use(L.a);var P=new L.a.Store({state:{currentUser:null,userProfile:{}},actions:{},mutations:{setCurrentUser:function(e,t){e.currentUser=t},setUserProfile:function(e,t){e.userProfile=t}}}),B=n("ueVu"),T={data:function(){return{db:B.db,auth:B.auth,ref:B.ref,tires:[],db_tires:B.db_tires,db_purchases:B.db_purchases,inches:"",data:{tempInch:[],tires:[]},specs:{width:"",height:"",inch:""}}},methods:{ctElem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.createElement(e.elem);if(!this.isEmpty(e))for(var n in e)switch(n){case"cls":t.className=e.cls;break;case"id":t.id=e.id;break;case"text":t.innerHTML=e.text;break;default:t.setAttribute("type",e.type)}return t},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},mounted:function(){Element.prototype.remove=function(){this.parentElement.removeChild(this)}}};n("a0pE"),n("erTq");console.log(V),i.a.mixin(T);var M=void 0;n("ueVu").auth.onAuthStateChanged(function(e){M||(M=new i.a({el:"#app",router:V,store:P,components:{App:s},template:"<App/>"}))})},SFLA:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMQSURBVFhH7VbLThRBFJ2lox+gxrc/IGMiLjQhBJiu6h4YElwp+gP8AH8giTsY0L2Kz62Z+AM+FhLEDzC4UhM0ETIsSLo85/btwDhdPd04S05yMtVV9123bqZyhDKIjTkTR9HtOAwXwTexte+EXHOPZ5BR8cEBhq+BT+Hkj2s2nXBqyrnJyYRc6z5ktsFVcFjVDw9Xq1VhaMk1GomDMHTO2nxShrLQQdCteGLiuJorBxcEF2Dgk5ueLub4X1IHurCxhiAuqtliQNbnofhVMskyXoa8lijaZEJqPh/xzMwxBPB5IM5TMghrN3AtVXXjRxwELSl7lqH/Ia/DmBV1kw3c2xVpON+dR1HSYPwtc0bSJhszCGrqrhfOmBfe0lPZ2u/gPDL5Jc8vPcOaezA+TxlJ4qBuSl6FMa/UXTcgcBLKHV92aKQfUB6iLBzdjBuNjjhiYFHUQfA39KyG75+ZdlAF+NiNx8dPU7YLMH4nN3tjNlRUgKdl0kEU1+uBbgvghA2XbYtVsPauiu4Dmy1vACSmHYJ4ouICfN8j9VMAO49lMmbZIJNr6G1GKLZzFck+nYznu9L3BSWJvFWVfWDzfVdj+ZgEsehUj+Aae0uFni+vzNqPieYBFAogHa/GLGQEsCAB+J5wSm8Axa/ggar0gGd9q+C9gn5NmET+SMUF6P457M3pp4AyuZX0NmG/Z2jtuooKID8jFSONuaXbAsqWf4ZBcAoHu5l3yAHSaGxxAKlsHcNmT4ZNMqT28AJkFmDNIbXlteMbRAQOX+ZVAb+/wfvIfqcrQ1aIezgTmbzsjXmt7nqBwyFR9nUyM2aAnuzkLGsEp+e0Xa9fVXfZQBWWC73nskxe0EN14weirCKIDe9VHIYsfRh+oW11kw/9P7g5kCDoPIq+lf5f6MbGLkFxrdB0yyJ1WPYoWo9HRy+r2XLgX2oYaEnzsBpFAkmbkS8jDJfdyMgJNXd4wNAwAnkGbotxkgOIE4/kWvchuwO552i466o+OMTN5lk4mIWDJTRqG/ygbLNSGECzyPycih+hACqVv28XxGdUFXCgAAAAAElFTkSuQmCC"},a0pE:function(e,t){},bTkw:function(e,t){},erTq:function(e,t){},uZ1x:function(e,t){},ueVu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"db",function(){return s}),n.d(t,"auth",function(){return a}),n.d(t,"currentUser",function(){return c}),n.d(t,"ref",function(){return u}),n.d(t,"db_tires",function(){return o}),n.d(t,"db_purchases",function(){return l});var i=n("kxiW"),r=n.n(i);n("881v");r.a.initializeApp({apiKey:"AIzaSyA0hCFocCA9j-_hugnX3tNU82kvpKSb7Bs",authDomain:"myproject-68a05.firebaseapp.com",databaseURL:"https://myproject-68a05.firebaseio.com",projectId:"myproject-68a05",storageBucket:"myproject-68a05.appspot.com",messagingSenderId:"261190786683"});var s=r.a.database(),a=r.a.auth(),c=a.currentUser,u=s.ref("/"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=""==e?"mytires/":"mytires/"+e;return s.ref(t)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=""==e?"purchase/":"purchase/"+e;return s.ref(t)}}},["NHnr"]);
//# sourceMappingURL=app.30e9c42c92520b6adeb3.js.map