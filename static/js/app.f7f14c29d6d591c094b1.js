webpackJsonp([1],{"+F03":function(t,e){},D4oe:function(t,e){},EQzX:function(t,e){},IPwR:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",{attrs:{name:"nav"}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App",methods:{}},s,!1,function(t){n("D4oe")},null,null).exports,a=n("/ocq"),o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("nav",[n("div",{staticClass:"wrapper"},[n("ul",t._l(t.tabs,function(e){return n("li",{class:{active:t.tabActive(e)}},[n("router-link",{attrs:{to:e.link}},[t._v("\n          "+t._s(e.name.ch))])],1)}),0)])])])},staticRenderFns:[]};var c=n("VU/8")({name:"Top",data:function(){return{tabs:[{name:{en:"overview",ch:"總覽"},link:"/overview"},{name:{en:"inventory",ch:"\b\b進銷"},link:"/inventory"}]}},computed:{},methods:{tabActive:function(t){return this.$route.name==t.link.match(/\w+/)[0]}},updated:function(){},mounted:function(){}},o,!1,function(t){n("obL2")},"data-v-4d2dd274",null).exports,u=n("ueVu"),p={data:function(){return{signupForm:{email:"",password:""}}},methods:{signUp:function(){var t=this;u.auth.createUserWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(function(e){t.$router.push("/")},function(t){alert(t.message)})},signIn:function(){var t=this;u.auth.signInWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(function(e){t.$router.replace("/")},function(t){alert(t.message)})}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signUp"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.signupForm.email,expression:"signupForm.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:t.signupForm.email},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"email",e.target.value)}}})]),t._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.signupForm.password,expression:"signupForm.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.signupForm.password},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"password",e.target.value)}}})]),t._v(" "),n("button",{on:{click:t.signUp}},[t._v("Sign up")]),t._v(" "),n("button",{on:{click:t.signIn}},[t._v("Sign in")])])},staticRenderFns:[]};var l=n("VU/8")(p,h,!1,function(t){n("EQzX")},null,null).exports,v=n("gRE1"),d=n.n(v),m=n("bOdI"),f=n.n(m),g={name:"Overview",components:{operateButton:{template:'<li v-if="act">\n    <button @click.stop="test(\'plus\')" id="plus">+</button>\n    <button v-if="itshow" @click.stop="test(\'take\')" id="take">-</button>\n  </li>',props:["act","itshow"],data:function(){return{}},methods:{test:function(t){this.$emit("change",t)}}}},data:function(){return{operateInch:"",operateSpec:"",operateNum:0,operateOffset:0,operateActive:!1,tireSum:0,today:new Date}},computed:{},methods:{changenum:function(t){var e=this.operateInch,n=this.operateSpec,i=e+"/"+n;"plus"==t?(this.db_tires(i).set({num:++this.tires[e][n].num}),this.operateOffset++,this.tireSum++):(this.db_tires(i).set({num:--this.tires[e][n].num}),this.operateOffset--,this.tireSum--),this.operateNum=this.tires[e][n].num},opActive:function(t){return this.operateInch==t},test:function(){var t=this,e=event.target,n=new FileReader;n.onload=function(){console.log(t);var e=n.result.split("\n").map(function(t){return t.split(",")}),i={};t.ref.set({mytires:i}),e.map(function(t){t.map(function(t){if(t){var e=t.replace(/\//,"-").trim(),n=e.trim().slice(-2);i.hasOwnProperty(n)?i[n].hasOwnProperty(e)||(i[n][e]={num:0}):i[n]=f()({},e,{num:0})}})}),t.ref.set({mytires:i})},n.readAsText(e.files[0])},operate:function(t,e,n){1==this.operateActive&&this.operateInch!=t&&this.reset(),this.operateInch=t,this.operateSpec=e,this.operateNum=n,this.operateActive=!0},check:function(t,e){var n=this.operateInch==t&&this.operateSpec==e;return!(""!=this.operateInch&&this.operateInch==t&&!n)},reset:function(){1==this.operateActive&&(document.getElementById("plus").remove(),this.operateNum>0&&document.getElementById("take").remove());var t=this.today.toLocaleString().split(" ")[0].replace(/\//g,"-"),e=this.today.toLocaleString().split(" ")[1].trim();if(this.operateOffset>0){var n={};n["/purchase/"+t+"/"+this.ref.child("purchase/"+t).push().key]={spec:this.operateSpec,num:this.operateOffset,time:e},this.ref.update(n)}this.operateInch=this.operateSpec="",this.operateActive=!1,this.operateOffset=0},clickEvent:function(t,e){t.addEventListener("click",e)}},mounted:function(){var t=this;this.inches=_.range(12,21),this.db_tires().once("value",function(e){t.tires=e.val();var n=[];d()(t.tires).forEach(function(t){n=n.concat(d()(t).map(function(t){return t.num}))}),t.tireSum=n.reduce(function(t,e){return t+e})})}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"ov",attrs:{id:"overview"}},[n("div",{attrs:{id:"ov-inch"}},[n("ul",t._l(t.inches,function(e){return n("li",[n("a",{attrs:{href:"#"+e}},[t._v(t._s(e))])])}),0)]),t._v(" "),n("div",{attrs:{id:"ov-tire"},on:{click:t.reset}},[n("div",[t._v("Total: "+t._s(t.tireSum))]),t._v(" "),n("ul",{staticClass:"ov-tire-st"},t._l(t.inches,function(e){return n("li",{staticClass:"ov-tire-st-li"},[n("div",{staticClass:"ov-tire-st-inch",attrs:{id:e}},[n("h3",[t._v(t._s(e))])]),t._v(" "),[n("ul",{staticClass:"ov-tire-nd"},[t._l(t.tires[e],function(i,s){return t.check(e,s)?n("li",{staticClass:"ov-tire-nd-li",on:{click:function(n){n.stopPropagation(),t.operate(e,s,i.num)}}},[n("span",{staticClass:"ov-tire-nd-spec"},[t._v(t._s(s.replace(/-/,"/")))]),t._v(" "),n("span",{staticClass:"ov-tire-nd-num",class:{zero:0==i.num}},[t._v("\n                "+t._s(i.num)+"\n              ")])]):t._e()}),t._v(" "),n("operate-button",{staticClass:"li-operate",attrs:{itshow:t.operateNum>0,act:t.opActive(e)},on:{change:t.changenum}})],2)]],2)}),0)])])},staticRenderFns:[]};var b=n("VU/8")(g,w,!1,function(t){n("wZP9")},null,null).exports;Date.now||(Date.now=function(){return(new Date).getTime()});var y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"iv",attrs:{id:"inventory"}},[n("ul",{staticClass:"history__outer"},t._l(t.purchases,function(e,i){return n("li",[n("span",{staticClass:"date"},[t._v(t._s(t.formatDate(i)))]),t._v(" "),n("ul",{staticClass:"history__inner"},t._l(e,function(e){return n("li",{staticClass:"set"},[n("span",{staticClass:"spec"},[t._v(t._s(t.formatSpec(e.spec)))]),t._v(" "),n("span",{staticClass:"num"},[t._v(t._s(e.num))])])}),0)])}),0)])},staticRenderFns:[]};var k=n("VU/8")({name:"Inventory",data:function(){return{purchases:""}},computed:{},methods:{formatDate:function(t){return t.match(/-(\S+)/)[1]},formatSpec:function(t){return t.replace(/-/,"/")}},mounted:function(){var t=this;this.db.ref("purchase").on("value",function(e){t.purchases=e.val()})}},y,!1,function(t){n("+F03")},null,null).exports,x={data:function(){return{tireWidthRange:{range:[],current:""},tireHeightRange:{range:[],current:""}}},methods:{check:function(){var t=this,e=this.specs.inch,n=this.specs.width,i=this.specs.height,s=this.data.tempInch,r=n;""!=i&&(r+="-"+i);var a="tire/"+e,o="tire/"+e+"/"+(r+="-"+e);""==e||""==n&&""==i?alert("invalid input"):(s.push(e),this.ref.child(a).once("value",function(e){e.exists()?t.ref.child(o).once("value",function(e){e.exists()?alert("exists"):(t.ref.child(o).set({num:1}),t.data.tires.push(r),t.specs.height="")}):(t.ref.child(o).set({num:1}),t.ref.child("tire/inches").set([s]),t.data.tires.push(r),t.specs.height="")}))},clean:function(){this.specs.inch="",this.specs.width="",this.specs.height=""}},computed:{},mounted:function(){for(var t=155;t<=325;t+=10)this.tireWidthRange.range.push(t);for(var e=30;e<=75;e+=5)this.tireHeightRange.range.push(e)}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},[n("div",{staticClass:"tireWidth"},[t._v("\n    胎寬\n    "),n("input",{attrs:{id:"toggle",type:"checkbox"}}),t._v(" "),n("label",{attrs:{for:"toggle"}}),t._v(" "),n("ul",t._l(t.tireWidthRange.range,function(e){return n("li",{attrs:{tabindex:"-1"},on:{click:function(n){t.specs.width=e}}},[t._v("\n          "+t._s(e)+"\n      ")])}),0)]),t._v(" "),n("div",{staticClass:"tireHeight"},[t._v("\n    胎高\n    "),n("input",{attrs:{id:"togglee",type:"checkbox"}}),t._v(" "),n("label",{attrs:{for:"togglee"}}),t._v(" "),n("ul",t._l(t.tireHeightRange.range,function(e){return n("li",{staticClass:"tireHeightLi",attrs:{tabindex:"-1"},on:{click:function(n){t.specs.height=e}}},[t._v("\n        "+t._s(e)+"\n      ")])}),0)]),t._v(" "),n("div",{staticClass:"inputSec"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.specs.width,expression:"specs.width"}],attrs:{type:"text"},domProps:{value:t.specs.width},on:{input:function(e){e.target.composing||t.$set(t.specs,"width",e.target.value)}}}),t._v(" "),t.specs.height?n("span",[n("span",[t._v(" / ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.specs.height,expression:"specs.height"}],attrs:{type:"text"},domProps:{value:t.specs.height},on:{input:function(e){e.target.composing||t.$set(t.specs,"height",e.target.value)}}})]):t._e(),t._v(" "),n("span",[t._v(" - ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.specs.inch,expression:"specs.inch"}],attrs:{type:"text"},domProps:{value:t.specs.inch},on:{input:function(e){e.target.composing||t.$set(t.specs,"inch",e.target.value)}}}),t._v(" "),n("button",{on:{click:function(e){t.check()}}},[t._v("確認")]),t._v(" "),n("button",{on:{click:function(e){t.clean()}}},[t._v("clean")])])])},staticRenderFns:[]};var E=n("VU/8")(x,C,!1,function(t){n("IPwR")},null,null).exports,A=n("kxiW"),F=n.n(A);i.a.use(a.a);var S=new a.a({mode:"history",routes:[{path:"*",redirect:"/login"},{path:"/",name:"overview",components:{default:b,nav:c},meta:{requiresAuth:!0}},{path:"/inventory",name:"inventory",components:{default:k,nav:c},meta:{requiresAuth:!0}},{path:"/insert",name:"insert",components:{default:E,nav:c},meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:l}]});S.beforeEach(function(t,e,n){var i=F.a.auth().currentUser,s=t.matched.some(function(t){return t.meta.requiresAuth});s&&!i?n("login"):!s&&i?n("/"):n()});var I=S,P=(n("M4fF"),n("NYxO"));n("ueVu");i.a.use(P.a);var U=new P.a.Store({state:{currentUser:null,userProfile:{}},actions:{},mutations:{setCurrentUser:function(t,e){t.currentUser=e},setUserProfile:function(t,e){t.userProfile=e}}}),R=n("ueVu"),N={data:function(){return{db:R.db,auth:R.auth,ref:R.ref,tires:[],db_tires:R.db_tires,db_purchases:R.db_purchases,inches:"",data:{tempInch:[],tires:[]},specs:{width:"",height:"",inch:""}}},methods:{ctElem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.createElement(t.elem);if(!this.isEmpty(t))for(var n in t)switch(n){case"cls":e.className=t.cls;break;case"id":e.id=t.id;break;case"text":e.innerHTML=t.text}return e},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},mounted:function(){Element.prototype.remove=function(){this.parentElement.removeChild(this)}}};n("a0pE"),n("erTq");i.a.mixin(N);var $=void 0;R.auth.onAuthStateChanged(function(t){$||($=new i.a({el:"#app",router:I,store:U,components:{App:r},template:"<App/>"}))})},a0pE:function(t,e){},erTq:function(t,e){},obL2:function(t,e){},ueVu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"db",function(){return r}),n.d(e,"auth",function(){return a}),n.d(e,"currentUser",function(){return o}),n.d(e,"ref",function(){return c}),n.d(e,"db_tires",function(){return u}),n.d(e,"db_purchases",function(){return p});var i=n("kxiW"),s=n.n(i);n("881v");s.a.initializeApp({apiKey:"AIzaSyA0hCFocCA9j-_hugnX3tNU82kvpKSb7Bs",authDomain:"myproject-68a05.firebaseapp.com",databaseURL:"https://myproject-68a05.firebaseio.com",projectId:"myproject-68a05",storageBucket:"myproject-68a05.appspot.com",messagingSenderId:"261190786683"});var r=s.a.database(),a=s.a.auth(),o=a.currentUser,c=r.ref(),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=""==t?"mytires/":"mytires/"+t;return r.ref(e)},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=""==t?"purchase/":"purchase/"+t;return r.ref(e)}},wZP9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f7f14c29d6d591c094b1.js.map